<html>
  <head>
    <title>MapTiler JS SDK example</title>
    <style>
      html, body {
        margin: 0;
      }

      #map-container {
        position: absolute;
        width: 100vw;
        height: 100vh;
        background: radial-gradient(circle, rgb(186 226 255) 5%, rgb(0 100 159) 98%);
      }

      #style-picker-container {
        position: absolute;
        z-index: 2;
        margin: 10px;
      }

    </style>

    <link rel="stylesheet" href="../dist/maptiler-sdk.css">
  </head>

  <body>
    <div id="map-container"></div>
    <div id="style-picker-container">
      <select name="mapstyles" id="mapstyles-picker">

      </select>

    </div>
  
    <script src ="../dist/maptiler-sdk.umd.js"></script>
    
    <script>
      maptilersdk.config.apiKey = "bod4IIn9bwK8mnZIk49v";

      const map = new maptilersdk.Map({
        container: document.getElementById("map-container"),
        style: maptilersdk.MapStyle.DATAVIZ.DARK,
        hash: true,
        scaleControl: true,
        fullscreenControl: true,
        terrainControl: true,
      })

      const styleDropDown = document.getElementById("mapstyles-picker")

      styleDropDown.onchange = (evt) => {
        map.setStyle(styleDropDown.value)
      }

      Object.keys(maptilersdk.MapStyle).forEach(s => {
        const styleOption = document.createElement('option');
        styleOption.value = maptilersdk.MapStyle[s].DEFAULT.id;
        styleOption.innerHTML = s.replace("_", " ").toLowerCase();
        styleDropDown.appendChild(styleOption);
      })


      map.on("load", async () => {
        const geojsonPath = "../test/fixtures/blue_hills.gpx.geojson"; // south Boston

        // await map.addPolyline({
        //   data: geojsonPath,
        //   outline: true,
        // })

        const gpxPath = "../test/fixtures/blue_hills.gpx"; // south Boston

        // await map.addPolyline({
        //   data: gpxPath,
        //   outline: true,
        // })

        const kmlPath = "../test/fixtures/noname.kml"; // South Paris (Anthony) zoom 9+

        // await map.addPolyline({
        //   data: kmlPath,
        //   outline: true,
        // })

        let res = await fetch(geojsonPath);
        const geojsonTxt = await res.text();

        // await map.addPolyline({
        //   data: geojsonTxt,
        //   outline: true,
        // })

        res = await fetch(geojsonPath);
        const geojsonObj = await res.json();

        // await map.addPolyline({
        //   data: geojsonObj,
        //   outline: true,
        // })

        res = await fetch(gpxPath);
        const gpxTxt = await res.text();

        // await map.addPolyline({
        //   data: gpxTxt,
        //   outline: true,
        // })

        res = await fetch(kmlPath);
        const kmlTxt = await res.text();

        // await map.addPolyline({
        //   data: kmlTxt,
        //   outline: true,
        // })

        // Replace this ID with one that works with your API key
        const maptilerDatasetId = "7e73f469-1683-45c4-8185-c8a9a4a23d9f"; // Montreal

        // await map.addPolyline({
        //   data: maptilerDatasetId,
        //   outline: true,
        // })

      })


    </script>
  </body>
</html>